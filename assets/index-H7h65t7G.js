import{r as e,a as t}from"./vendor-D7amQhf0.js";import{r as s,R as a,U as r,L as l,E as o,a as n,A as i,b as c,c as d,P as m,S as x,d as u,I as g,T as h,e as b,X as p,D as f,F as j,f as N,C as y,Z as v,g as w,M as S,h as k,i as E,j as C,k as A,l as I}from"./icons-ClymBU_K.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var P,R,D={exports:{}},T={};var O,M=(R||(R=1,D.exports=function(){if(P)return T;P=1;var t=e(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function n(e,t,a){var n,i={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,n)&&!o.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:l.current}}return T.Fragment=a,T.jsx=n,T.jsxs=n,T}()),D.exports),L={};var _=function(){if(O)return L;O=1;var e=t();return L.createRoot=e.createRoot,L.hydrateRoot=e.hydrateRoot,L}();const z=({onLogin:e})=>{const[t,i]=s.useState(""),[c,d]=s.useState(""),[m,x]=s.useState(!1),[u,g]=s.useState("");return M.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:M.jsxs("div",{className:"w-full max-w-md",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-4",children:M.jsx(a,{className:"w-10 h-10 text-white"})}),M.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"IoT Spotter"}),M.jsx("p",{className:"text-gray-400",children:"Administrator Access"})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[M.jsxs("form",{onSubmit:s=>{s.preventDefault();const a=(()=>{const e=localStorage.getItem("iot-spotter-credentials");return e?JSON.parse(e):{username:"admin",password:"spotter2024"}})();t.trim()===a.username.trim()&&c===a.password?e():(g("Invalid username or password"),setTimeout(()=>g(""),3e3))},className:"space-y-6",children:[M.jsxs("div",{children:[M.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[M.jsx(r,{className:"w-4 h-4"}),"Username"]}),M.jsx("input",{type:"text",value:t,onChange:e=>i(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",placeholder:"Enter username",required:!0}),M.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Spaces at the end of username are automatically handled"})]}),M.jsxs("div",{children:[M.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[M.jsx(l,{className:"w-4 h-4"}),"Password"]}),M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:m?"text":"password",value:c,onChange:e=>d(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300 pr-12",placeholder:"Enter password",required:!0}),M.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-400 transition-colors",children:m?M.jsx(o,{className:"w-5 h-5"}):M.jsx(n,{className:"w-5 h-5"})})]})]}),u&&M.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 text-sm",children:u}),M.jsx("button",{type:"submit",className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25",children:"Access Game System"})]}),M.jsxs("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[M.jsxs("p",{className:"text-yellow-400 text-sm text-center",children:[M.jsx("strong",{children:"Default:"})," admin / spotter2024"]}),M.jsx("p",{className:"text-gray-400 text-xs text-center mt-1",children:"Credentials can be changed in admin panel"})]})]})]})})};class B{static STORAGE_KEYS={PLAYERS:"iot-spotter-players",IMAGES:"iot-spotter-images",CREDENTIALS:"iot-spotter-credentials",BACKUP_PLAYERS:"iot-spotter-players-backup",BACKUP_IMAGES:"iot-spotter-images-backup",LAST_BACKUP:"iot-spotter-last-backup",PERFORMANCE_STATS:"iot-spotter-performance"};static MAX_STORAGE_SIZE=4718592;static CLEANUP_THRESHOLD=.85;static saveData(e,t){const s=performance.now();try{const a=JSON.stringify(t),r=new Blob([a]).size;this.getStorageStats().used+r>this.MAX_STORAGE_SIZE&&(console.warn("Storage approaching limit, performing cleanup..."),this.performStorageCleanup()),localStorage.setItem(e,a);const l=e+"-backup",o={data:a,timestamp:Date.now(),checksum:this.generateChecksum(a),size:r,version:"2.0"};return localStorage.setItem(l,JSON.stringify(o)),this.updatePerformanceStats(e,performance.now()-s,r),localStorage.setItem(this.STORAGE_KEYS.LAST_BACKUP,Date.now().toString()),!0}catch(a){return console.error("Error saving data:",a),this.handleStorageError(e,t)}}static loadData(e,t){const s=performance.now();try{const a=localStorage.getItem(e);if(a){const t=JSON.parse(a);if(this.validateData(t))return this.updatePerformanceStats(e+"-load",performance.now()-s,0),t}return this.recoverFromBackup(e,t)}catch(a){return console.error("Error loading data:",a),this.recoverFromBackup(e,t)}}static recoverFromBackup(e,t){try{const t=e+"-backup",s=localStorage.getItem(t);if(s){const t=JSON.parse(s);if(t.data&&t.checksum&&t.timestamp){const s=JSON.parse(t.data);if(this.generateChecksum(t.data)===t.checksum)return console.log("Data recovered from backup for key:",e),localStorage.setItem(e,t.data),s;console.warn("Backup checksum mismatch for key:",e)}}}catch(s){console.error("Backup recovery failed:",s)}return t}static handleStorageError(e,t){try{return this.performStorageCleanup(),localStorage.setItem(e,JSON.stringify(t)),console.log("Storage successful after cleanup"),!0}catch(s){try{const s=this.compressData(t);return localStorage.setItem(e,JSON.stringify(s)),console.log("Storage successful with compression"),!0}catch(a){try{return sessionStorage.setItem(e,JSON.stringify(t)),console.warn("Data saved to sessionStorage as fallback"),!0}catch(r){return this.saveToIndexedDB(e,t)}}}}static performStorageCleanup(){const e=Object.keys(localStorage),t=[];e.forEach(e=>{try{if(e.includes("-backup")){const s=JSON.parse(localStorage.getItem(e)||"{}");s.timestamp&&t.push({key:e,timestamp:s.timestamp,size:s.size||0})}}catch(s){localStorage.removeItem(e)}}),t.sort((e,t)=>e.timestamp-t.timestamp);let s=this.getStorageStats().used;const a=this.MAX_STORAGE_SIZE*this.CLEANUP_THRESHOLD;for(const r of t){if(s<=a)break;const e=Date.now()-6048e5;r.timestamp<e&&(localStorage.removeItem(r.key),s-=r.size,console.log("Cleaned up old backup:",r.key))}}static compressData(e){return Array.isArray(e)?e.map(e=>e.url&&e.url.length>1e3?{...e,url:this.compressBase64Image(e.url),compressed:!0}:e):e}static compressBase64Image(e){try{return e}catch(t){return e}}static saveToIndexedDB(e,t){try{if("indexedDB"in window)return console.log("IndexedDB fallback would be implemented here"),!1}catch(s){console.error("IndexedDB fallback failed:",s)}return!1}static generateChecksum(e){let t=0;if(0===e.length)return t.toString();for(let s=0;s<e.length;s++){t=(t<<5)-t+e.charCodeAt(s),t&=t}return`${t.toString()}-${e.length}`}static validateData(e){return!!e&&(Array.isArray(e)?e.every(e=>!(!e||"object"!=typeof e)&&(!(!e.id||"string"!=typeof e.id)&&(!!(!e.url||e.name&&e.size)&&(void 0===e.score||!("number"!=typeof e.score||e.score<0))))):"object"==typeof e)}static updatePerformanceStats(e,t,s){try{const a=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.PERFORMANCE_STATS)||"{}");a[e]||(a[e]={count:0,totalDuration:0,totalSize:0,avgDuration:0,avgSize:0}),a[e].count++,a[e].totalDuration+=t,a[e].totalSize+=s,a[e].avgDuration=a[e].totalDuration/a[e].count,a[e].avgSize=a[e].totalSize/a[e].count,localStorage.setItem(this.STORAGE_KEYS.PERFORMANCE_STATS,JSON.stringify(a))}catch(a){console.warn("Performance stats update failed:",a)}}static exportAllData(){const e={players:this.loadData(this.STORAGE_KEYS.PLAYERS,[]),images:this.loadData(this.STORAGE_KEYS.IMAGES,[]),credentials:this.loadData(this.STORAGE_KEYS.CREDENTIALS,{}),performanceStats:this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{}),exportTimestamp:Date.now(),version:"2.0",storageStats:this.getStorageStats()};return JSON.stringify(e,null,2)}static importAllData(e){try{const t=JSON.parse(e);if(!t.version||!t.exportTimestamp)throw new Error("Invalid backup format");return t.players&&Array.isArray(t.players)&&this.saveData(this.STORAGE_KEYS.PLAYERS,t.players),t.images&&Array.isArray(t.images)&&this.saveData(this.STORAGE_KEYS.IMAGES,t.images),t.credentials&&"object"==typeof t.credentials&&this.saveData(this.STORAGE_KEYS.CREDENTIALS,t.credentials),!0}catch(t){return console.error("Import failed:",t),!1}}static getStorageStats(){let e=0,t=0;const s={};for(let r in localStorage)if(localStorage.hasOwnProperty(r)){const a=localStorage[r].length+r.length;e+=a,t++,r.includes("images")?s.Images=(s.Images||0)+a:r.includes("players")?s.Players=(s.Players||0)+a:r.includes("backup")?s.Backups=(s.Backups||0)+a:s.Other=(s.Other||0)+a}const a=this.MAX_STORAGE_SIZE;return{used:e,total:a,percentage:e/a*100,itemCount:t,breakdown:s,performance:this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{})}}static getPerformanceInsights(){const e=this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{}),t=Object.entries(e);return{slowestOperations:t.map(([e,t])=>({operation:e,avgDuration:t.avgDuration||0})).sort((e,t)=>t.avgDuration-e.avgDuration).slice(0,5),largestOperations:t.map(([e,t])=>({operation:e,avgSize:t.avgSize||0})).sort((e,t)=>t.avgSize-e.avgSize).slice(0,5),totalOperations:t.reduce((e,[,t])=>e+(t.count||0),0)}}}const G=({gameImages:e,setGameImages:t,players:a,updatePlayerScore:r,onBack:l,onLogout:o})=>{const[N,y]=s.useState("images"),[v,w]=s.useState(null),[S,k]=s.useState(""),[E,C]=s.useState(null),[A,I]=s.useState({}),[P,R]=s.useState(!1),[D,T]=s.useState([]),[O,L]=s.useState(()=>B.loadData("iot-spotter-credentials",{username:"admin",password:"spotter2024"})),_=s.useRef(null),z=s.useRef(null),G=100,F=.85,Y=s.useMemo(()=>{const t=e.reduce((e,t)=>e+(t.size||0),0),s=Math.min(e.length,30),a=e.length/G*100;return{totalSize:t,readyForGame:s,storageUsagePercent:a,isNearLimit:a>=90}},[e,G]),U=s.useCallback(e=>new Promise((t,s)=>{const a=document.createElement("canvas"),r=a.getContext("2d"),l=new Image;l.onload=()=>{try{const n=800;let{width:i,height:c}=l;if(i>n||c>n){const e=Math.min(n/i,n/c);i*=e,c*=e}if(a.width=i,a.height=c,r){let s,n;r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(l,0,0,i,c);try{s=a.toDataURL("image/webp",F),n=Math.round(.75*s.length),(s.startsWith("data:image/png")||n>e.size)&&(s=a.toDataURL("image/jpeg",F),n=Math.round(.75*s.length))}catch(o){s=a.toDataURL("image/jpeg",F),n=Math.round(.75*s.length)}t({url:s,size:n})}else s(new Error("Canvas context not available"))}catch(n){s(n)}},l.onerror=()=>s(new Error("Failed to load image")),l.src=URL.createObjectURL(e)}),[800,F]),K=s.useCallback(async e=>{R(!0),T(e);try{for(let s=0;s<e.length;s+=2){const a=e.slice(s,s+2);await Promise.all(a.map(async(e,a)=>{const r=`${s+a}`;try{I(e=>({...e,[r]:10})),I(e=>({...e,[r]:30}));const{url:s,size:a}=await U(e);I(e=>({...e,[r]:70}));const l={id:Date.now().toString()+Math.random().toString(36).substr(2,9),url:s,name:e.name,size:a};t(e=>{const t=[...e,l];return t.length>G?(console.log(`Removing ${t.length-G} oldest images to stay within limit`),t.slice(-100)):t}),I(e=>({...e,[r]:100})),setTimeout(()=>{I(e=>{const t={...e};return delete t[r],t})},1500)}catch(l){console.error("Error processing image:",e.name,l),I(e=>{const t={...e};return delete t[r],t})}})),s+2<e.length&&await new Promise(e=>setTimeout(e,200))}}finally{R(!1),T([])}},[U,t,G]),$=s.useCallback(async e=>{const t=e.target.files;if(!t||0===t.length)return;const s=Array.from(t).filter(e=>{const t=e.type.startsWith("image/"),s=e.size<=10485760;return t||console.warn(`Skipping non-image file: ${e.name}`),s||console.warn(`Skipping oversized file: ${e.name} (${(e.size/1024/1024).toFixed(1)}MB)`),t&&s});0!==s.length?s.length>20?alert("Too many files selected. Please upload 20 or fewer images at once for optimal performance."):(await K(s),_.current&&(_.current.value="")):alert("No valid image files selected. Please choose image files under 10MB each.")},[K]),J=s.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[t]),H=s.useCallback(()=>{confirm("Are you sure you want to remove all images? This action cannot be undone.")&&t([])},[t]),W=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},V=Object.keys(A).length>0?Object.values(A).reduce((e,t)=>e+t,0)/Object.keys(A).length:0,Z=B.getStorageStats();return M.jsx("div",{className:"min-h-screen p-6",children:M.jsxs("div",{className:"max-w-6xl mx-auto",children:[M.jsxs("div",{className:"flex items-center justify-between mb-8",children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("button",{onClick:l,className:"p-3 bg-gray-600/20 border border-gray-500/30 rounded-lg hover:bg-gray-600/30 transition-all duration-300",children:M.jsx(i,{className:"w-5 h-5 text-gray-400"})}),M.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Panel"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("div",{className:"px-3 py-2 rounded-lg border "+(Y.isNearLimit?"bg-yellow-600/20 border-yellow-500/30":"bg-green-600/20 border-green-500/30"),children:M.jsx("span",{className:"text-sm font-medium "+(Y.isNearLimit?"text-yellow-400":"text-green-400"),children:Y.isNearLimit?"âš ï¸ Near Limit":"âœ“ Optimized"})}),M.jsxs("button",{onClick:o,className:"p-3 bg-red-600/20 border border-red-500/30 rounded-lg hover:bg-red-600/30 transition-all duration-300 flex items-center gap-2",children:[M.jsx(c,{className:"w-5 h-5 text-red-400"}),M.jsx("span",{className:"text-red-400",children:"Logout"})]})]})]}),M.jsx("div",{className:"flex gap-2 mb-8",children:[{id:"images",label:"Image Management",icon:d},{id:"scores",label:"Score Management",icon:m},{id:"settings",label:"Settings",icon:x}].map(e=>{const t=e.icon;return M.jsxs("button",{onClick:()=>y(e.id),className:"px-6 py-3 rounded-lg font-medium transition-all duration-300 flex items-center gap-2 "+(N===e.id?"bg-blue-600/30 border border-blue-500/50 text-blue-300":"bg-black/20 border border-gray-600/30 text-gray-400 hover:bg-black/30"),children:[M.jsx(t,{className:"w-4 h-4"}),e.label]},e.id)})}),"images"===N&&M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[M.jsxs("div",{className:"flex items-center justify-between mb-6",children:[M.jsx("h2",{className:"text-2xl font-bold text-white",children:"Upload Game Images"}),M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsxs("div",{className:"text-blue-400 font-medium",children:[e.length,"/",G," images"]}),M.jsxs("div",{className:"text-sm text-gray-400",children:["Total: ",W(Y.totalSize)]}),M.jsxs("div",{className:"text-sm text-purple-400",children:["Game Ready: ",Y.readyForGame,"/30"]})]})]}),Y.isNearLimit&&M.jsx("div",{className:"mb-6 p-4 bg-yellow-600/10 border border-yellow-500/30 rounded-lg",children:M.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[M.jsx(u,{className:"w-5 h-5"}),M.jsx("span",{className:"font-medium",children:"Storage Warning:"}),M.jsxs("span",{children:["Approaching maximum image limit (",Y.storageUsagePercent.toFixed(1),"% used). Oldest images will be automatically removed when limit is exceeded."]})]})}),P&&M.jsxs("div",{className:"mb-6 p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[M.jsxs("div",{className:"flex items-center justify-between mb-2",children:[M.jsxs("span",{className:"text-blue-400 font-medium",children:["Processing Images... (",D.length," files)"]}),M.jsxs("span",{className:"text-blue-400",children:[Math.round(V),"%"]})]}),M.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:M.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${V}%`}})}),M.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Images are being optimized for better performance and storage efficiency"})]}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{onClick:()=>!P&&_.current?.click(),className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 "+(P?"border-gray-500/30 cursor-not-allowed opacity-50":"border-blue-500/30 cursor-pointer hover:border-blue-400/50 hover:bg-blue-500/5"),children:[M.jsx(d,{className:"w-12 h-12 mx-auto mb-4 "+(P?"text-gray-400":"text-blue-400")}),M.jsx("p",{className:"font-medium mb-2 "+(P?"text-gray-400":"text-white"),children:P?"Processing images...":"Click to upload images"}),M.jsx("p",{className:"text-gray-400 text-sm",children:"Support: JPG, PNG, GIF, WebP (Max 20 files, 10MB each)"}),M.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Images are automatically optimized and compressed for optimal performance"})]}),M.jsx("input",{ref:_,type:"file",multiple:!0,accept:"image/*",onChange:$,disabled:P,className:"hidden"}),M.jsxs("div",{className:"flex gap-4",children:[M.jsx("button",{onClick:()=>!P&&_.current?.click(),disabled:P,className:"px-6 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Processing...":"Add More Images"}),e.length>0&&M.jsx("button",{onClick:H,disabled:P,className:"px-6 py-3 bg-red-600/20 border border-red-500/30 rounded-lg text-red-400 hover:bg-red-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear All Images"})]})]})]}),e.length>0&&M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:[M.jsxs("div",{className:"flex items-center justify-between mb-6",children:[M.jsxs("h3",{className:"text-xl font-bold text-white",children:["Uploaded Images (",e.length,")"]}),M.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(g,{className:"w-4 h-4"}),M.jsx("span",{children:"Optimized & Ready"})]})})]}),M.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 max-h-96 overflow-y-auto custom-scrollbar",children:e.map(e=>M.jsxs("div",{className:"relative group",children:[M.jsx("img",{src:e.url,alt:e.name,className:"w-full h-24 object-cover rounded-lg border border-gray-600/30 cursor-pointer hover:border-blue-400/50 transition-all duration-300",onClick:()=>C(e.url),loading:"lazy"}),M.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg flex items-center justify-center gap-2",children:[M.jsx("button",{onClick:()=>C(e.url),className:"p-2 bg-blue-600/80 rounded-full hover:bg-blue-500 transition-colors",children:M.jsx(n,{className:"w-4 h-4 text-white"})}),M.jsx("button",{onClick:()=>J(e.id),className:"p-2 bg-red-600/80 rounded-full hover:bg-red-500 transition-colors",children:M.jsx(h,{className:"w-4 h-4 text-white"})})]}),M.jsxs("div",{className:"mt-1",children:[M.jsx("p",{className:"text-xs text-gray-400 truncate",children:e.name}),M.jsx("p",{className:"text-xs text-gray-500",children:W(e.size||0)})]})]},e.id))})]})]}),"scores"===N&&M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[M.jsxs("div",{className:"flex items-center justify-between mb-6",children:[M.jsx("h2",{className:"text-2xl font-bold text-white",children:"Player Scores"}),M.jsxs("div",{className:"text-green-400 text-sm",children:["âœ“ Auto-saved â€¢ ",a.length," players stored"]})]}),0===a.length?M.jsxs("div",{className:"text-center py-12 text-gray-400",children:[M.jsx(m,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),M.jsx("p",{children:"No player scores yet"}),M.jsx("p",{className:"text-sm mt-2",children:"Scores will be automatically saved when players complete games"})]}):M.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar",children:a.map(e=>M.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border border-gray-600/30 rounded-lg",children:[M.jsxs("div",{children:[M.jsx("p",{className:"text-white font-medium",children:e.name}),M.jsx("p",{className:"text-gray-400 text-sm",children:new Date(e.timestamp).toLocaleString()})]}),M.jsx("div",{className:"flex items-center gap-3",children:v===e.id?M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("input",{type:"number",value:S,onChange:e=>k(e.target.value),className:"w-24 p-2 bg-black/50 border border-blue-500/30 rounded text-white text-center",min:"0",max:"40",step:"0.1",placeholder:"0.0-40.0",autoFocus:!0}),M.jsx("button",{onClick:()=>(e=>{const t=parseFloat(S);!isNaN(t)&&t>=0&&t<=40?(r(e,t),console.log("Score updated and will be automatically saved"),w(null),k("")):alert("Please enter a valid score between 0.0 and 40.0")})(e.id),className:"p-2 bg-green-600/20 border border-green-500/30 rounded hover:bg-green-600/30 transition-colors",children:M.jsx(b,{className:"w-4 h-4 text-green-400"})}),M.jsx("button",{onClick:()=>w(null),className:"p-2 bg-gray-600/20 border border-gray-500/30 rounded hover:bg-gray-600/30 transition-colors",children:M.jsx(p,{className:"w-4 h-4 text-gray-400"})})]}):M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx("span",{className:"text-2xl font-bold text-blue-400 min-w-[4rem] text-right",children:e.score.toFixed(1)}),M.jsx("span",{className:"text-gray-400 text-sm",children:"/ 40.0"}),M.jsx("button",{onClick:()=>{return t=e.id,s=e.score,w(t),void k(s.toString());var t,s},className:"p-2 bg-blue-600/20 border border-blue-500/30 rounded hover:bg-blue-600/30 transition-colors",children:M.jsx(m,{className:"w-4 h-4 text-blue-400"})})]})})]},e.id))})]}),"settings"===N&&M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-2xl p-8",children:[M.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"System Settings"}),M.jsx("div",{className:"space-y-6",children:M.jsxs("div",{children:[M.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:"Login Credentials"}),M.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"block text-gray-300 font-medium mb-2",children:"Username"}),M.jsx("input",{type:"text",value:O.username,onChange:e=>L(t=>({...t,username:e.target.value})),className:"w-full p-3 bg-black/50 border border-orange-500/30 rounded-lg text-white focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400/20"})]}),M.jsxs("div",{children:[M.jsx("label",{className:"block text-gray-300 font-medium mb-2",children:"Password"}),M.jsx("input",{type:"password",value:O.password,onChange:e=>L(t=>({...t,password:e.target.value})),className:"w-full p-3 bg-black/50 border border-orange-500/30 rounded-lg text-white focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400/20"})]})]}),M.jsx("button",{onClick:()=>{B.saveData("iot-spotter-credentials",O)?alert("Credentials updated successfully!"):alert("Failed to save credentials. Please try again.")},className:"mt-4 px-6 py-3 bg-orange-600/20 border border-orange-500/30 rounded-lg text-orange-400 hover:bg-orange-600/30 transition-all duration-300",children:"Save Credentials"})]})})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:[M.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"Data Backup & Recovery"}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{className:"flex gap-4",children:[M.jsxs("button",{onClick:()=>{try{const e=B.exportAllData(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`iot-spotter-backup-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert("Backup exported successfully!")}catch(e){console.error("Export failed:",e),alert("Failed to export backup. Please try again.")}},className:"px-6 py-3 bg-purple-600/20 border border-purple-500/30 rounded-lg text-purple-400 hover:bg-purple-600/30 transition-all duration-300 flex items-center gap-2",children:[M.jsx(f,{className:"w-4 h-4"}),"Export Backup"]}),M.jsxs("button",{onClick:()=>z.current?.click(),className:"px-6 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 flex items-center gap-2",children:[M.jsx(j,{className:"w-4 h-4"}),"Import Backup"]})]}),M.jsx("input",{ref:z,type:"file",accept:".json",onChange:e=>{const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=e=>{try{const t=e.target?.result;B.importAllData(t)?(alert("Backup imported successfully! Please refresh the page to see the changes."),window.location.reload()):alert("Failed to import backup. Please check the file format.")}catch(t){console.error("Import failed:",t),alert("Failed to import backup. Invalid file format.")}},s.readAsText(t),z.current&&(z.current.value="")},className:"hidden"}),M.jsx("p",{className:"text-gray-400 text-sm",children:"Export creates a complete backup of all players, scores, and images. Import restores data from a backup file."})]})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[M.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:"System Statistics"}),M.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[M.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[M.jsx("div",{className:"text-2xl font-bold text-blue-400",children:e.length}),M.jsx("div",{className:"text-gray-400",children:"Images Stored"})]}),M.jsxs("div",{className:"p-4 bg-green-600/10 border border-green-500/30 rounded-lg",children:[M.jsx("div",{className:"text-2xl font-bold text-green-400",children:a.length}),M.jsx("div",{className:"text-gray-400",children:"Players Recorded"})]}),M.jsxs("div",{className:"p-4 bg-purple-600/10 border border-purple-500/30 rounded-lg",children:[M.jsx("div",{className:"text-2xl font-bold text-purple-400",children:a.length>0?Math.max(...a.map(e=>e.score)).toFixed(1):"0.0"}),M.jsx("div",{className:"text-gray-400",children:"Highest Score"})]}),M.jsxs("div",{className:"p-4 bg-yellow-600/10 border border-yellow-500/30 rounded-lg",children:[M.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:W(Z.used)}),M.jsx("div",{className:"text-gray-400",children:"Storage Used"})]})]})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[M.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4",children:"Performance Optimizations"}),M.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[M.jsxs("div",{className:"space-y-3",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"Advanced image compression (WebP/JPEG)"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"Batch processing with progress tracking"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"Automatic storage limit management"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"Lazy loading for better performance"})]})]}),M.jsxs("div",{className:"space-y-3",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"Robust data persistence with backups"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"Automatic cleanup of old data"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"File size validation and optimization"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),M.jsx("span",{className:"text-gray-300",children:"Responsive UI with smooth animations"})]})]})]})]})]}),E&&M.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",onClick:()=>C(null),children:M.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[M.jsx("img",{src:E,alt:"Preview",className:"max-w-full max-h-full object-contain rounded-lg"}),M.jsx("button",{onClick:()=>C(null),className:"absolute top-4 right-4 p-2 bg-black/50 rounded-full hover:bg-black/70 transition-colors",children:M.jsx(p,{className:"w-6 h-6 text-white"})})]})})]})})},F=({playerName:e,gameImages:t,onGameComplete:a,onBack:r})=>{const[l,o]=s.useState(0),[n,c]=s.useState(300),[d,m]=s.useState(10),[x,u]=s.useState([]),[g,h]=s.useState(""),[b,p]=s.useState(!1),[f,j]=s.useState(!1),[w,S]=s.useState(!1),[k,E]=s.useState(""),[C,A]=s.useState([]),I=s.useRef(null);s.useEffect(()=>{const e=[...t].sort(()=>Math.random()-.5);A(e.slice(0,30))},[t]),s.useEffect(()=>{if(!b||f)return;const e=setInterval(()=>{c(e=>e<=1?(D(),0):e-1),m(e=>e<=1?(R(),10):e-1)},1e3);return()=>clearInterval(e)},[b,f,l]);const P=()=>{p(!0),I.current?.focus()},R=()=>{u(e=>[...e,g]),h(""),l>=29||l>=C.length-1?D():(o(e=>e+1),m(10),setTimeout(()=>I.current?.focus(),100))},D=()=>{j(!0),S(!0),g.trim()&&u(e=>[...e,g])},T=()=>{const e=parseFloat(k);!isNaN(e)&&e>=0&&e<=40?a(e):alert("Please enter a valid score between 0.0 and 40.0")};if(!b)return M.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:M.jsx("div",{className:"max-w-2xl w-full text-center",children:M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-12",children:[M.jsxs("div",{className:"mb-8",children:[M.jsx(N,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),M.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Play?"}),M.jsxs("p",{className:"text-xl text-blue-300 mb-2",children:["Welcome, ",e,"!"]}),M.jsx("p",{className:"text-gray-400",children:"You'll see 30 random IoT images"})]}),M.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 text-left",children:[M.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[M.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.jsx(y,{className:"w-5 h-5 text-blue-400"}),M.jsx("span",{className:"text-blue-400 font-semibold",children:"Time Limits"})]}),M.jsx("p",{className:"text-gray-300 text-sm",children:"5 minutes total"}),M.jsx("p",{className:"text-gray-300 text-sm",children:"10 seconds per image"})]}),M.jsxs("div",{className:"p-4 bg-purple-600/10 border border-purple-500/30 rounded-lg",children:[M.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.jsx(v,{className:"w-5 h-5 text-purple-400"}),M.jsx("span",{className:"text-purple-400 font-semibold",children:"Scoring"})]}),M.jsx("p",{className:"text-gray-300 text-sm",children:"Range: 0.0 - 40.0 points"}),M.jsx("p",{className:"text-gray-300 text-sm",children:"Admin scores your answers"})]})]}),M.jsxs("div",{className:"flex gap-4 justify-center",children:[M.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300 flex items-center gap-2",children:[M.jsx(i,{className:"w-4 h-4"}),"Back"]}),M.jsx("button",{onClick:P,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 transition-all duration-300 transform hover:scale-105",children:"ðŸš€ Start Game"})]})]})})});if(w)return M.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:M.jsx("div",{className:"max-w-2xl w-full text-center",children:M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-12",children:[M.jsxs("div",{className:"mb-8",children:[M.jsx("div",{className:"text-6xl font-bold bg-gradient-to-r from-red-500 via-yellow-500 to-red-500 bg-clip-text text-transparent mb-4 animate-pulse",children:"GAME OVER"}),M.jsxs("div",{className:"text-2xl text-white mb-2",children:["Great job, ",e,"!"]}),M.jsxs("div",{className:"text-gray-400",children:["Answered: ",x.length," / ",Math.min(30,C.length)," images"]})]}),M.jsxs("div",{className:"bg-orange-600/10 border border-orange-500/30 rounded-xl p-6 mb-6",children:[M.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:"Admin: Enter Player Score"}),M.jsxs("div",{className:"flex gap-3 justify-center items-center",children:[M.jsx("input",{type:"number",value:k,onChange:e=>E(e.target.value),placeholder:"0.0 - 40.0",className:"w-32 p-3 bg-black/50 border border-orange-500/30 rounded-lg text-white text-center focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400/20",min:"0",max:"40",step:"0.1"}),M.jsx("span",{className:"text-orange-400 font-medium",children:"/ 40.0"}),M.jsx("button",{onClick:T,className:"px-6 py-3 bg-orange-600/20 border border-orange-500/30 rounded-lg text-orange-400 hover:bg-orange-600/30 transition-all duration-300 font-medium",children:"Submit Score"})]}),M.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Score range: 0.0 to 40.0 points"})]}),M.jsx("button",{onClick:()=>S(!1),className:"px-6 py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300",children:"View Answers"})]})})});if(f)return M.jsx("div",{className:"min-h-screen p-6",children:M.jsx("div",{className:"max-w-4xl mx-auto",children:M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[M.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-6",children:"Your Answers Review"}),M.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.slice(0,x.length).map((e,t)=>M.jsxs("div",{className:"bg-white/5 border border-gray-600/30 rounded-lg p-4",children:[M.jsx("img",{src:e.url,alt:`Question ${t+1}`,className:"w-full h-32 object-cover rounded-lg mb-3"}),M.jsxs("div",{className:"text-sm",children:[M.jsxs("p",{className:"text-gray-400",children:["Question ",t+1,":"]}),M.jsxs("p",{className:"text-white font-medium",children:['"',x[t]||"No answer",'"']})]})]},e.id))}),M.jsx("div",{className:"flex justify-center mt-8",children:M.jsx("button",{onClick:()=>S(!0),className:"px-6 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300",children:"Back to Score Entry"})})]})})});const O=C[l];return M.jsx("div",{className:"min-h-screen p-6",children:M.jsxs("div",{className:"max-w-4xl mx-auto",children:[M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6 mb-6",children:[M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("h2",{className:"text-xl font-bold text-white",children:e}),M.jsxs("div",{className:"text-blue-400",children:["Image ",l+1," of ",Math.min(30,C.length)]})]}),M.jsxs("div",{className:"flex items-center gap-6",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(y,{className:"w-5 h-5 text-yellow-400"}),M.jsx("span",{className:"text-white font-mono text-lg",children:(L=n,`${Math.floor(L/60)}:${(L%60).toString().padStart(2,"0")}`)})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Image Timer"}),M.jsxs("div",{className:"text-lg font-bold "+(d<=3?"text-red-400":"text-green-400"),children:[d,"s"]})]})]})]}),M.jsx("div",{className:"mt-4",children:M.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:M.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:(l+1)/Math.min(30,C.length)*100+"%"}})})})]}),M.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[M.jsx("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:M.jsxs("div",{className:"text-center",children:[M.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"What is this IoT device?"}),O&&M.jsxs("div",{className:"relative",children:[M.jsx("img",{src:O.url,alt:`IoT Device ${l+1}`,className:"w-full max-h-80 object-contain rounded-lg border border-gray-600/30"}),M.jsx("div",{className:"absolute top-4 right-4",children:M.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg "+(d<=3?"bg-red-500/80 text-white animate-pulse":"bg-green-500/80 text-white"),children:d})})]})]})}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[M.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4",children:"Your Answer"}),M.jsxs("div",{className:"space-y-4",children:[M.jsx("input",{ref:I,type:"text",value:g,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&R(),placeholder:"Type what you see...",className:"w-full p-4 bg-black/50 border border-green-500/30 rounded-lg text-white placeholder-gray-400 focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20 transition-all duration-300 text-lg"}),M.jsxs("div",{className:"flex gap-3",children:[M.jsx("button",{onClick:R,className:"flex-1 py-3 bg-gradient-to-r from-green-600 to-blue-600 rounded-lg font-bold text-white hover:from-green-500 hover:to-blue-500 transition-all duration-300",children:"Submit Answer"}),M.jsx("button",{onClick:()=>{h(""),R()},className:"px-6 py-3 bg-yellow-600/20 border border-yellow-500/30 rounded-lg text-yellow-400 hover:bg-yellow-600/30 transition-all duration-300",children:"Skip"})]})]}),M.jsx("div",{className:"mt-6 p-4 bg-white/5 rounded-lg",children:M.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[M.jsxs("div",{children:[M.jsx("div",{className:"text-2xl font-bold text-blue-400",children:x.length}),M.jsx("div",{className:"text-xs text-gray-400",children:"Answered"})]}),M.jsxs("div",{children:[M.jsx("div",{className:"text-2xl font-bold text-purple-400",children:Math.min(30,C.length)-l}),M.jsx("div",{className:"text-xs text-gray-400",children:"Remaining"})]})]})})]})]})]})});var L},Y=({players:e,onBack:t})=>{const s=e=>{switch(e){case 1:return M.jsx(k,{className:"w-6 h-6 text-yellow-400"});case 2:return M.jsx(S,{className:"w-6 h-6 text-gray-300"});case 3:return M.jsx(E,{className:"w-6 h-6 text-orange-400"});default:return M.jsx(C,{className:"w-6 h-6 text-blue-400"})}},a=e=>{switch(e){case 1:return"from-yellow-600/20 to-orange-600/20 border-yellow-500/30";case 2:return"from-gray-600/20 to-gray-500/20 border-gray-400/30";case 3:return"from-orange-600/20 to-red-600/20 border-orange-500/30";default:return"from-blue-600/10 to-purple-600/10 border-blue-500/20"}};return M.jsx("div",{className:"min-h-screen p-6",children:M.jsxs("div",{className:"max-w-4xl mx-auto",children:[M.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[M.jsx("button",{onClick:t,className:"p-3 bg-gray-600/20 border border-gray-500/30 rounded-lg hover:bg-gray-600/30 transition-all duration-300",children:M.jsx(i,{className:"w-5 h-5 text-gray-400"})}),M.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent",children:"ðŸ† Leaderboard"})]}),0===e.length?M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[M.jsx(w,{className:"w-16 h-16 text-gray-400 mx-auto mb-4 opacity-50"}),M.jsx("h2",{className:"text-2xl font-bold text-gray-400 mb-2",children:"No Champions Yet!"}),M.jsx("p",{className:"text-gray-500",children:"Be the first to complete the IoT Spotter challenge!"})]}):M.jsxs("div",{className:"space-y-4",children:[e.length>=3&&M.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:[M.jsx("div",{className:"order-1 md:order-1",children:M.jsxs("div",{className:"bg-gradient-to-br from-gray-600/20 to-gray-500/20 border border-gray-400/30 rounded-2xl p-6 text-center h-40 flex flex-col justify-center",children:[M.jsx(S,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),M.jsx("div",{className:"text-lg font-bold text-white",children:e[1].name}),M.jsx("div",{className:"text-2xl font-bold text-gray-300",children:e[1].score.toFixed(1)}),M.jsx("div",{className:"text-sm text-gray-400",children:"#2"})]})}),M.jsx("div",{className:"order-2 md:order-2",children:M.jsxs("div",{className:"bg-gradient-to-br from-yellow-600/30 to-orange-600/30 border border-yellow-500/50 rounded-2xl p-6 text-center h-48 flex flex-col justify-center relative overflow-hidden",children:[M.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400/10 to-orange-400/10 animate-pulse"}),M.jsx(k,{className:"w-12 h-12 text-yellow-400 mx-auto mb-3 relative z-10"}),M.jsx("div",{className:"text-xl font-bold text-white relative z-10",children:e[0].name}),M.jsx("div",{className:"text-3xl font-bold text-yellow-400 relative z-10",children:e[0].score.toFixed(1)}),M.jsx("div",{className:"text-sm text-yellow-300 relative z-10",children:"ðŸ‘‘ CHAMPION"})]})}),M.jsx("div",{className:"order-3 md:order-3",children:M.jsxs("div",{className:"bg-gradient-to-br from-orange-600/20 to-red-600/20 border border-orange-500/30 rounded-2xl p-6 text-center h-40 flex flex-col justify-center",children:[M.jsx(E,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),M.jsx("div",{className:"text-lg font-bold text-white",children:e[2].name}),M.jsx("div",{className:"text-2xl font-bold text-orange-400",children:e[2].score.toFixed(1)}),M.jsx("div",{className:"text-sm text-orange-300",children:"#3"})]})})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[M.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[M.jsx(w,{className:"w-6 h-6 text-yellow-400"}),"Complete Rankings"]}),M.jsx("div",{className:"space-y-3",children:e.map((e,t)=>{const r=t+1;return M.jsxs("div",{className:`flex items-center justify-between p-6 rounded-xl bg-gradient-to-r border transition-all duration-300 hover:scale-[1.02] ${1===r?"from-yellow-600/20 to-orange-600/20 border-yellow-500/50 shadow-lg shadow-yellow-500/10":a(r)}`,children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-black/30",children:s(r)}),M.jsxs("div",{children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsxs("span",{className:"text-2xl font-bold "+(1===r?"text-yellow-400":2===r?"text-gray-300":3===r?"text-orange-400":"text-blue-400"),children:["#",r]}),M.jsx("span",{className:"text-xl font-bold text-white",children:e.name}),1===r&&M.jsxs("div",{className:"flex items-center gap-1",children:[M.jsx(k,{className:"w-5 h-5 text-yellow-400"}),M.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:"CHAMPION"})]})]}),M.jsxs("div",{className:"text-gray-400 text-sm",children:[new Date(e.timestamp).toLocaleDateString()," at"," ",new Date(e.timestamp).toLocaleTimeString()]})]})]}),M.jsxs("div",{className:"text-right",children:[M.jsx("div",{className:"text-3xl font-bold "+(1===r?"text-yellow-400":2===r?"text-gray-300":3===r?"text-orange-400":"text-blue-400"),children:e.score.toFixed(1)}),M.jsx("div",{className:"text-gray-400 text-sm",children:"/ 40.0 points"})]})]},e.id)})})]}),M.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-xl p-6 text-center",children:[M.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.length}),M.jsx("div",{className:"text-gray-400",children:"Total Players"})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-xl p-6 text-center",children:[M.jsx("div",{className:"text-2xl font-bold text-blue-400",children:e.length>0?(e.reduce((e,t)=>e+t.score,0)/e.length).toFixed(1):"0.0"}),M.jsx("div",{className:"text-gray-400",children:"Average Score"})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6 text-center",children:[M.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e.length>0?Math.max(...e.map(e=>e.score)).toFixed(1):"0.0"}),M.jsx("div",{className:"text-gray-400",children:"Highest Score"})]})]})]})]})})},U=()=>{const e=s.useRef(null);return s.useEffect(()=>{const t=e.current;if(!t)return;const s=t.getContext("2d");if(!s)return;t.width=window.innerWidth,t.height=window.innerHeight;const a=[];for(let e=0;e<200;e++)a.push({x:Math.random()*t.width,y:Math.random()*t.height,size:2*Math.random()+.5,opacity:Math.random(),speed:.5*Math.random()+.1,twinkleSpeed:.02*Math.random()+.005,twinklePhase:Math.random()*Math.PI*2});let r;const l=()=>{const e=s.createLinearGradient(0,0,0,t.height);e.addColorStop(0,"#0a0a1a"),e.addColorStop(.5,"#1a0a2a"),e.addColorStop(1,"#2a0a3a"),s.fillStyle=e,s.fillRect(0,0,t.width,t.height),a.forEach(e=>{e.y+=e.speed,e.y>t.height&&(e.y=-5,e.x=Math.random()*t.width),e.twinklePhase+=e.twinkleSpeed;const a=.5*Math.sin(e.twinklePhase)+.5,r=e.opacity*a;s.beginPath();const l=s.createRadialGradient(e.x,e.y,0,e.x,e.y,3*e.size);l.addColorStop(0,`rgba(255, 255, 255, ${r})`),l.addColorStop(.5,`rgba(100, 150, 255, ${.5*r})`),l.addColorStop(1,"rgba(100, 150, 255, 0)"),s.fillStyle=l,s.arc(e.x,e.y,3*e.size,0,2*Math.PI),s.fill(),s.beginPath(),s.fillStyle=`rgba(255, 255, 255, ${r})`,s.arc(e.x,e.y,e.size,0,2*Math.PI),s.fill()});const o=s.createRadialGradient(.3*t.width,.7*t.height,0,.3*t.width,.7*t.height,.8*t.width);o.addColorStop(0,"rgba(100, 50, 150, 0.1)"),o.addColorStop(.5,"rgba(50, 100, 200, 0.05)"),o.addColorStop(1,"rgba(0, 50, 100, 0)"),s.fillStyle=o,s.fillRect(0,0,t.width,t.height),r=requestAnimationFrame(l)},o=()=>{t.width=window.innerWidth,t.height=window.innerHeight};return window.addEventListener("resize",o),l(),()=>{window.removeEventListener("resize",o),cancelAnimationFrame(r)}},[]),M.jsx("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full -z-10",style:{background:"radial-gradient(ellipse at center, #1a0a2a 0%, #0a0a1a 100%)"}})};function K(){const[e,t]=s.useState(!1),[a,r]=s.useState("home"),[l,o]=s.useState(""),[n,i]=s.useState([]),[d,m]=s.useState([]),[u,g]=s.useState(!1),[h,b]=s.useState(null),[p,f]=s.useState(!1);s.useEffect(()=>{(async()=>{try{console.log("Loading persisted data...");const e=B.loadData("iot-spotter-players",[]);console.log("Loaded players:",e.length),i(e);const t=B.loadData("iot-spotter-images",[]);console.log("Loaded images:",t.length),m(t),f(!0),console.log("Data loading completed successfully")}catch(e){console.error("Error loading persisted data:",e),i([]),m([]),f(!0)}})()},[]),s.useEffect(()=>{if(!p)return;const e=setTimeout(async()=>{try{B.saveData("iot-spotter-players",n)?console.log("Players data saved successfully:",n.length,"players"):console.error("Failed to save players data")}catch(e){console.error("Error saving players data:",e)}},500);return()=>clearTimeout(e)},[n,p]),s.useEffect(()=>{if(!p)return;const e=setTimeout(async()=>{try{B.saveData("iot-spotter-images",d)?console.log("Images data saved successfully:",d.length,"images"):console.error("Failed to save images data")}catch(e){console.error("Error saving images data:",e)}},1e3);return()=>clearTimeout(e)},[d,p]),s.useEffect(()=>{const e=setInterval(()=>{(n.length>0||d.length>0)&&(console.log("Performing periodic backup..."),B.saveData("iot-spotter-players",n),B.saveData("iot-spotter-images",d))},3e5);return()=>clearInterval(e)},[n,d]),s.useEffect(()=>{const e=e=>{try{B.saveData("iot-spotter-players",n),B.saveData("iot-spotter-images",d),console.log("Data saved before page unload")}catch(t){console.error("Error saving data before unload:",t)}};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[n,d]);const j=()=>{t(!0)},N=()=>{t(!1),r("home")},v=()=>{if(!l.trim())return void alert("Please enter your name to start the game!");if(d.length<30)return void alert("Not enough images uploaded yet. Please contact the game admin.");const e=Date.now().toString();b(e),r("game")},S=e=>{if(h){const t={id:h,name:l,score:e,timestamp:Date.now()};i(e=>{const s=[...e,t].sort((e,t)=>t.score-e.score);return console.log("New player added:",t.name,"Score:",t.score),s})}r("home"),o(""),b(null)},k=(e,t)=>{i(s=>{const a=s.map(s=>s.id===e?{...s,score:t}:s).sort((e,t)=>t.score-e.score);return console.log("Player score updated:",e,"New score:",t),a})};return p?e?"admin"===a?M.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[M.jsx(U,{}),M.jsx(G,{gameImages:d,setGameImages:m,players:n,updatePlayerScore:k,onBack:()=>r("home"),onLogout:N})]}):"game"===a?M.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[M.jsx(U,{}),M.jsx(F,{playerName:l,gameImages:d,onGameComplete:S,onBack:()=>r("home")})]}):"leaderboard"===a?M.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[M.jsx(U,{}),M.jsx(Y,{players:n,onBack:()=>r("home")})]}):M.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[M.jsx(U,{}),M.jsx("div",{className:"relative z-10 p-6",children:M.jsxs("div",{className:"max-w-6xl mx-auto",children:[M.jsxs("div",{className:"flex justify-between items-center mb-8",children:[M.jsxs("div",{className:"text-center flex-1",children:[M.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4",children:[M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-600 rounded-full flex items-center justify-center mb-2 mx-auto",children:M.jsx(C,{className:"w-8 h-8 text-white"})}),M.jsx("p",{className:"text-sm text-blue-200",children:"Open Source Programming Club"})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-red-600 rounded-full flex items-center justify-center mb-2 mx-auto",children:M.jsx(w,{className:"w-8 h-8 text-white"})}),M.jsx("p",{className:"text-sm text-blue-200",children:"VIT Chennai"})]})]}),M.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"IoT Spotter"}),M.jsx("p",{className:"text-xl text-blue-300 mb-2",children:"5-Minute Vision Test"}),M.jsx("p",{className:"text-sm text-gray-400",children:"Created by Meijeevan K.T"})]}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx("button",{onClick:()=>r("admin"),className:"p-3 bg-purple-600/20 border border-purple-500/30 rounded-lg hover:bg-purple-600/30 transition-all duration-300 group",children:M.jsx(x,{className:"w-5 h-5 text-purple-400 group-hover:rotate-90 transition-transform duration-300"})}),M.jsx("button",{onClick:N,className:"p-3 bg-red-600/20 border border-red-500/30 rounded-lg hover:bg-red-600/30 transition-all duration-300",children:M.jsx(c,{className:"w-5 h-5 text-red-400"})})]})]}),M.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[M.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[M.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[M.jsx(A,{className:"w-6 h-6 text-blue-400"}),"Start Your Challenge"]}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"block text-blue-300 font-medium mb-2",children:"Enter Your Name"}),M.jsx("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Your name here...",className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",onKeyPress:e=>"Enter"===e.key&&v()})]}),M.jsxs("button",{onClick:v,disabled:!l.trim()||d.length<30,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25",children:["ðŸš€ Start Game (",d.length,"/30 images ready)"]})]})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[M.jsxs("button",{onClick:()=>g(!u),className:"w-full flex items-center justify-between text-left",children:[M.jsx("h3",{className:"text-xl font-bold text-green-400",children:"ðŸ“– Game Instructions"}),M.jsx("span",{className:"text-green-400",children:u?"âˆ’":"+"})]}),u&&M.jsxs("div",{className:"mt-4 space-y-3 text-gray-300",children:[M.jsxs("div",{className:"flex items-start gap-3",children:[M.jsx("span",{className:"text-blue-400 font-bold",children:"ðŸ§ "}),M.jsx("p",{children:"You will be shown 30 random images of IoT devices and components."})]}),M.jsxs("div",{className:"flex items-start gap-3",children:[M.jsx("span",{className:"text-yellow-400 font-bold",children:"â±ï¸"}),M.jsx("p",{children:"You have exactly 10 seconds per image to identify what it is."})]}),M.jsxs("div",{className:"flex items-start gap-3",children:[M.jsx("span",{className:"text-red-400 font-bold",children:"ðŸŽ¯"}),M.jsx("p",{children:"Total game time is 5 minutes - use your time wisely!"})]}),M.jsxs("div",{className:"flex items-start gap-3",children:[M.jsx("span",{className:"text-purple-400 font-bold",children:"ðŸ“"}),M.jsx("p",{children:"Type your answer in the text box below each image."})]}),M.jsxs("div",{className:"flex items-start gap-3",children:[M.jsx("span",{className:"text-green-400 font-bold",children:"ðŸ†"}),M.jsx("p",{children:"Your score will be calculated by the game administrator."})]}),M.jsxs("div",{className:"flex items-start gap-3",children:[M.jsx("span",{className:"text-orange-400 font-bold",children:"ðŸ“Š"}),M.jsx("p",{children:"Check the leaderboard to see your ranking!"})]})]})]})]}),M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-6",children:[M.jsxs("div",{className:"flex items-center justify-between mb-4",children:[M.jsxs("h3",{className:"text-xl font-bold text-yellow-400 flex items-center gap-2",children:[M.jsx(w,{className:"w-5 h-5"}),"Leaderboard"]}),M.jsx("button",{onClick:()=>r("leaderboard"),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:"View All"})]}),M.jsxs("div",{className:"space-y-3",children:[n.slice(0,5).map((e,t)=>M.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg "+(0===t?"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border border-yellow-500/30":"bg-white/5 border border-gray-600/30"),children:[M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsxs("span",{className:"text-lg font-bold "+(0===t?"text-yellow-400":1===t?"text-gray-300":2===t?"text-orange-400":"text-gray-500"),children:["#",t+1]}),M.jsx("span",{className:"text-white font-medium",children:e.name})]}),M.jsx("span",{className:"font-bold "+(0===t?"text-yellow-400":"text-blue-400"),children:e.score})]},e.id)),0===n.length&&M.jsxs("div",{className:"text-center py-8 text-gray-400",children:[M.jsx(I,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),M.jsx("p",{children:"No players yet!"}),M.jsx("p",{className:"text-sm",children:"Be the first to play!"})]})]})]}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6",children:[M.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-4 flex items-center gap-2",children:[M.jsx(y,{className:"w-5 h-5"}),"Game Status"]}),M.jsxs("div",{className:"space-y-3 text-sm",children:[M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-gray-400",children:"Images Ready:"}),M.jsxs("span",{className:"font-bold "+(d.length>=30?"text-green-400":"text-red-400"),children:[d.length,"/30"]})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-gray-400",children:"Total Players:"}),M.jsx("span",{className:"text-blue-400 font-bold",children:n.length})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-gray-400",children:"Game Duration:"}),M.jsx("span",{className:"text-purple-400 font-bold",children:"5 minutes"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-gray-400",children:"Data Status:"}),M.jsx("span",{className:"text-green-400 font-bold",children:"âœ“ Secured"})]})]})]})]})]})]})})]}):M.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[M.jsx(U,{}),M.jsx(z,{onLogin:j})]}):M.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[M.jsx(U,{}),M.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8 text-center",children:[M.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full mx-auto mb-4"}),M.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Loading Game Data..."}),M.jsx("p",{className:"text-gray-400",children:"Please wait while we restore your data"})]})]})}_.createRoot(document.getElementById("root")).render(M.jsx(s.StrictMode,{children:M.jsx(K,{})}));
